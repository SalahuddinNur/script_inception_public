#!/bin/bash
#
# cf http://unix.stackexchange.com/questions/2161/rsync-filter-copying-one-pattern-only
# cf http://stackoverflow.com/questions/19296190/rsync-include-from-vs-exclude-from-what-is-the-actual-difference

set -eu
# copy files from source to destination, excluding any files generated by Bristol FDTD
# rsync --archive --verbose --compress  --exclude-from=$(dirname $(readlink -f $0))/BFDTD_torque_output.list "$1" "$2"

# copy only .in, .geo, .inp and .sh files from source to destination
# rsync --archive --verbose --compress --prune-empty-dirs --include='*.in' --include='*.geo' --include='*.inp' --include='*.sh' --include='*/' --exclude='*' "$1" "$2"

# combination of both of the above, using a filter file
rsync --archive --verbose --compress --prune-empty-dirs --filter="merge $(dirname $(readlink -f $0))/MPB.rsync.filter" "$1" "$2"
